<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
</head>


<body>
    <div id="errors"></div>
    <div class="payment-periodicity-container">
        <div id="onetime" class="button-selector two-columns active">Jednorázovo</div>
        <div id="periodical" class="button-selector two-columns">Mesačne</div>
    </div>
    

    <form id="give-money-form" action="https://api.darujme.sk/v1/donations/post/" method="post" enctype="application/x-www-form-urlencoded">

    <h4>Darujem Sumu</h4>
    <div class="onetimes">
        <div id="amout_onetime_020" class="onetime-divs button-selector active"><span>20 &euro;</span></div>
        <div id="amout_onetime_050" class="onetime-divs button-selector"><span>50 &euro;</span></div>
        <div id="amout_onetime_100" class="onetime-divs button-selector"><span>100 &euro;</span></div>
        <div id="amout_onetime_500" class="onetime-divs button-selector"><span>500 &euro;</span></div>
    </div>

    <input id="custom-onetime" class="onetime-divs button-selector" type="number" min="1" max="9999" placeholder="Vlastná suma" value="">

    <div class="periodicals">
        <div id="amout_periodical_10" class="periodical-divs button-selector active hidden"><span>10 &euro;</span></div>
        <div id="amout_periodical_15" class="periodical-divs button-selector hidden"><span>15 &euro;</span></div>
        <div id="amout_periodical_20" class="periodical-divs button-selector hidden"><span>20 &euro;</span></div>
        <div id="amout_periodical_50" class="periodical-divs button-selector hidden"><span>50 &euro;</span></div>
    </div>

    <input id="custom-periodical" class="periodical-divs button-selector hidden" type="number" min="1" max="9999" placeholder="Vlastná suma" value="">
    <input name="value" id="value-send" type="hidden" min="1" max="9999" value="" required>

    
        <input name="campaign_id" type="hidden" value="5a4949c5-d7f8-4264-9756-cfc2fadb0341">
        <!-- <select name="payment_method_id" class="method_select" required>
            <optgroup label="Jednorázový dar">
                <option value="1342d2af-a343-4e73-9f5a-7593b9978697" class="main-opt-onetime" selected>CardPay</option>
                <option value="c58f76e1-cade-4300-9531-71e275476edd">PayPal</option>
                <option value="38409407-c4ec-4060-b4a1-4792f29335ad">TatraPay</option>
                <option value="c07e714c-74ed-4ac6-ab63-3898a73f1fa0">SporoPay</option>
                <option value="f2e7956e-a3f6-4bff-9e18-2ab3096a5bed">ePlatby VÚB</option>
                <option value="3dcf55d1-6383-45b4-b098-dc588187b854">Bankový Prevod</option>
            </optgroup>
            <optgroup label="Pravidelný dar">
                <option value="b71ff7cf-39f7-40db-8a34-e1f30292c215" class="main-opt-periodical">ComfortPay</option>
                <option value="f425f4af-74ce-4a9b-82d6-783c93b80f17">Bankový Prevod</option>
            </optgroup>
        </select> -->

        <div class="radio-group-onetime">
            <input id="radio-cardpay" class="main-opt-onetime" type="radio" name="payment_method_id" value="1342d2af-a343-4e73-9f5a-7593b9978697" required>
            <label for="radio-cardpay">CardPay</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/cardpay-logo.jpg" alt="cardpay-logo" style="width: 4rem;">
            <br>

            <input id="radio-paypal" type="radio" name="payment_method_id" value="c58f76e1-cade-4300-9531-71e275476edd" required>
            <label for="radio-paypal">PayPal</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/paypal-logo.png" alt="paypal-logo" style="width: 3rem;">
            <br>

            <input id="radio-tatrapay" type="radio" name="payment_method_id" value="38409407-c4ec-4060-b4a1-4792f29335ad" required>
            <label for="radio-tatrapay">TatraPay</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/tatrapay-logo.jpg" alt="tatrapay-logo" style="width: 4rem;">
            <br>

            <input id="radio-sporopay" type="radio" name="payment_method_id" value="c07e714c-74ed-4ac6-ab63-3898a73f1fa0" required>
            <label for="radio-sporopay">SporoPay</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/sporopay-logo.png" alt="sporopay-logo" style="width: 5rem;">
            <br>

            <input id="radio-evub" type="radio" name="payment_method_id" value="f2e7956e-a3f6-4bff-9e18-2ab3096a5bed" required>
            <label for="radio-evub">ePlatby VÚB</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/eplatby-logo.png" alt="evub-logo" style="width: 5rem;">
            <br> 

            <input id="radio-banktrans" type="radio" name="payment_method_id" value="3dcf55d1-6383-45b4-b098-dc588187b854" required>
            <label for="radio-banktrans">Bankový Prevod</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/logo-karty.png" alt="banktrans-logo" style="width: 5rem;">
            <br>
        </div>

        <div class="radio-group-periodical">
            <input id="radio-comfortpay" class="main-opt-periodical" type="radio" name="payment_method_id" value="b71ff7cf-39f7-40db-8a34-e1f30292c215" required>
            <label for="radio-comfortpay">ComfortPay</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/comfortpay-logo.jpg" alt="comfortpay-logo"  style="width: 2rem;">
            <br>

            <input id="radio-banktrans-periodical" type="radio" name="payment_method_id" value="c58f76e1-cade-4300-9531-71e275476edd" required>
            <label for="radio-banktrans-periodical">Bankový Prevod</label>
            <img src="https://new.sda.sk/wp-content/uploads/2021/12/logo-karty.png" alt="banktrans-logo" style="width: 8rem;">
            <br>
        </div>
        <input name="first_name" type="text" placeholder="Krstné Meno" required>
        <input name="last_name" type="text" placeholder="Priezvisko" required>
        <input name="email" type="email" placeholder="Email" required>

        <br>
        <input name="sda-agreement" id="sda-agreement" type="checkbox" value="sda-agreement" required>
        <label for="sda-agreement">Potvrdzujem, ze som bol/a informovaný/á o <strong><a href="https://www.sda.sk/sukromie" style="color: black;"> spracovaní osobných údajov</a></strong> organizáciou Slovenská debatná asociácia, ktorej poskytujem dar</label>
        <br>
        <input name="sda-agreement" id="darujme-agreement" type="checkbox" value="darujme-agreement" required>
        <label for="sda-agreement">Potvrdzujem, že som bol/a informovaný/á o spracovaní Osobných údajov v systéme <strong><a href="https://www.darujme.sk" style="color: black;">DARUJME.sk</a></strong></label>

        <p>Potvrdením údajov súhlasíte s <strong><a href="https://darujme.sk/pravidla-a-podmienky/" style="color: black;">pravidlami</a></strong> používania <strong><a href="https://www.darujme.sk" style="color: black;">DARUJME.sk</a></strong> V ďalšom kroku Vás presmerujeme na stránku, kde bezpečne vyplníte Vaše platobné údaje a zašleme Vám aj informačný mail o dare. Ďakujeme!

            Darca zároveň berie na vedomie, že poskytuje finančný dar bez protihodnoty a teda na platobnú operáciu sa nevzťahujú možnosti reklamácie platby ako pri nákupe služieb a tovarov.</p>
        <input id="submit" type="submit" value="Darovať">
    </form>

    <style>
        #submit{
            background: #21D46E;
        }

        .button-selector{
            background: white;
            margin-left: 10px;
            margin-bottom: 10px;
            display: -webkit-box;
            display: -moz-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            border: 1px solid #EAEAEA;
            box-shadow: none;
            align-items: center;
            -webkit-box-align: center;
            justify-content: center;
            -webkit-box-pack: center;
            flex-grow: 1;
            flex-direction: row;
            -webkit-box-flex: 1;
            flex-basis: 100px;
            padding: 9px 20px;
            position: relative;
        }

        .button-selector:hover {
            cursor: pointer;
        }

        .active{
            border-color: #21d46e !important;
            background-color: #21d46e !important;
        }

        .hidden{
            display: none;
            visibility: hidden;
        }

        #custom-periodical, #custom-onetime{
            width: 93vw;
        }
    </style>
</body>

<script>
    //Checks if the form inputs are filled in correctly every time form changes 
    checkActive();

    $("#give-money-form").change(function(){
		$("#errors").empty();

        if($("#value").val() < 1){
            $("#errors").append("<p> Môžete darovať najmenej 1€ a najviac 9999€ </p>");
            $("#value").val(1);

        } else if ($("#value").val() > 9999){
            $("#errors").append("<p> Môžete darovať najmenej 1€ a najviac 9999€ </p>");
            $("#value").val(9999);
        }

    })

    //TODO -> Make this more efficient, tidy up the code!!! Break it into functions
    function checkActive(){

        if($("#onetime").hasClass("active")){

            $(".radio-group-onetime").show();
            $(".radio-group-periodical").hide();
            $(".main-opt-onetime").prop("checked", true)

            if($("#custom-onetime").hasClass("active")){
                $("#value-send").val($("#custom-onetime").val())
                $("#custom-onetime").change(function(){
                    $("#value-send").val($("#custom-onetime").val())
                })
            }else {
                $("#value-send").val($(".onetimes").find(".active").attr("id").slice(-3));
            }
        
        }else if ($("#periodical").hasClass("active")){

            $(".radio-group-onetime").hide();
            $(".radio-group-periodical").show();
            $(".main-opt-periodical").prop("checked", true)

            if($("#custom-periodical").hasClass("active")){
                $("#value-send").val($("#custom-periodical").val())
                $("#custom-periodical").change(function(){
                    $("#value-send").val($("#custom-periodical").val())
                })
            }else {
                $("#value-send").val($(".periodicals").find(".active").attr("id").slice(-2));
            }
    
        }
    }

    $("#onetime").click(function(){
        $("#onetime").addClass("active");
        $("#periodical").removeClass("active");
        $(".onetime-divs").removeClass("hidden");
        $(".periodical-divs").addClass("hidden");
        checkActive();

    })

    $("#periodical").click(function(){
        $("#periodical").addClass("active");
        $("#onetime").removeClass("active");
        $(".periodical-divs").removeClass("hidden");
        $(".onetime-divs").addClass("hidden");
        checkActive();
    })

    var $onetime_divs = $('.onetime-divs').click(function(e) {
        $onetime_divs.removeClass("active");
        $(this).addClass("active");
        checkActive();
    });

    var $periodical_divs = $('.periodical-divs').click(function(e) {
        $periodical_divs.removeClass("active");
        $(this).addClass("active");
    
        checkActive();
    });
    
</script>
</html>

